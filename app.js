var App=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"get",value:function(e,t){fetch("https://xivapi.com"+e,{mode:"cors"}).then(function(e){return e.json()}).then(function(e){return t(e)})}},{key:"search",value:function(e,t){var n={indexes:"item",filters:"ItemSearchCategory.ID>=1",columns:"ID,Icon,Name,Rarity,ItemSearchCategory.Name,ItemKind.Name",string:e.trim()},r=Object.keys(n).map(function(e){return esc(e)+"="+encodeURIComponent(n[e])}).join("&");this.get("/search?"+r,t)}},{key:"getItem",value:function(e,t){this.get("/Item/"+e,t)}},{key:"getItemPrices",value:function(e,t,n){this.get("/market/"+t+"/items/"+e,n)}},{key:"getItemPriceHistory",value:function(e,t,n){this.get("/market/"+t+"/items/"+e+"/history",n)}},{key:"getCategoryListings",value:function(e,t,n){this.get("/market/"+t+"/category/"+e,n)}},{key:"getSearchCategories",value:function(e){this.get("/market/categories",e)}},{key:"getServerList",value:function(e){this.get("/servers/dc",e)}}]),e}();t.default=new o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),u=r(a),c=n(5),l=r(c),s=function(){function e(){i(this,e),this.ui=$(".market-categories")}return o(e,[{key:"render",value:function(){var e=this;u.default.getSearchCategories(function(t){var n={1:[],2:[],3:[],4:[]};t.forEach(function(e,t){n[e.Category][e.Order]=e}),n.forEach(function(t,n){var r=[];t.forEach(function(e,t){r.push('<button id="'+e.ID+'">'+e.Name+"</button>")}),e.ui.append("<div>"+r.join("")+"</div><br>")}),e.watchForSelection()})}},{key:"watchForSelection",value:function(){this.ui.on("click","button",function(e){var t=$(e.currentTarget).attr("id");l.default.listCategoryStock(t)})}}]),e}();t.default=new s},function(e,t,n){"use strict";Object.prototype.forEach||Object.defineProperty(Object.prototype,"forEach",{value:function(e,t){if(null===this)throw new TypeError("Not an object");t=t||window;for(var n in this)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(){function e(){r(this,e),this.localeStorageKey="server",this.defaultServer="Phoenix",this.ui=$(".server-select-box")}return i(e,[{key:"setServerList",value:function(){var e=this;a.default.getServerList(function(t){t.forEach(function(t,n){var r=[];t.forEach(function(e){r.push('<option value="'+e+'">'+e+"</option>")}),e.ui.append('<optgroup label="'+n+'">'+r.join("")+"</optgroup>")}),e.setUserServer()})}},{key:"setUserServer",value:function(){var e=localStorage.getItem(this.localeStorageKey);e=e||this.defaultServer,localStorage.setItem(this.localeStorageKey,e),console.log("Server set to: "+e),this.ui.val(e)}},{key:"watchForSelection",value:function(){var e=this;this.ui.on("change",function(t){var n=$(t.currentTarget).val();localStorage.setItem(e.localeStorageKey,n),location.reload()})}}]),e}();t.default=new u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(2),o=(r(i),n(3)),a=r(o),u=n(1),c=r(u);a.default.setServerList(),a.default.watchForSelection(),c.default.render()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),u=r(a),c=n(6),l=r(c),s=function(){function e(){i(this,e),this.ui=$(".market-category-stock")}return o(e,[{key:"listCategoryStock",value:function(e){var t=this,n=localStorage.getItem("server");this.ui.html("<p>loading...</p>"),u.default.getCategoryListings(e,n,function(e){t.ui.html(""),e.forEach(function(e,n){t.ui.append('<button id="'+e.Item.ID+'">('+e.Quantity+") "+e.Item.Name+"</button>")}),t.watchForSelection()})}},{key:"watchForSelection",value:function(){this.ui.on("click","button",function(e){var t=$(e.currentTarget).attr("id");l.default.renderPrices(t),l.default.renderHistory(t)})}}]),e}();t.default=new s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(){function e(){r(this,e),this.uiPrices=$(".market-item-prices"),this.uiHistory=$(".market-item-history")}return i(e,[{key:"renderPrices",value:function(e){var t=this,n=localStorage.getItem("server");this.uiPrices.html("<p>loading prices...</p>"),a.default.getItemPrices(e,n,function(e){t.uiPrices.html(""),e.Prices.forEach(function(e,n){t.uiPrices.append("<div>Total Cost: "+e.Quantity+"x"+e.PricePerUnit+" = "+e.PriceTotal+"</div>")})})}},{key:"renderHistory",value:function(e){var t=this,n=localStorage.getItem("server");this.uiHistory.html("<p>loading history...</p>"),a.default.getItemPriceHistory(e,n,function(e){t.uiHistory.html(""),e.History.forEach(function(e,n){t.uiHistory.append("<div>Historic Purchase: "+e.Quantity+" x "+e.PricePerUnit+" = "+e.PriceTotal+" @ "+e.PurchaseDate+"</div>")})})}}]),e}();t.default=new u}]);